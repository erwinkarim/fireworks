.page-header
  %h1
    = @report.title
    %small 
      = 'between ' + @report.start_date.strftime('%B %d, %Y') + ' and ' + @report.end_date.strftime('%B %d, %Y') 

- YAML::load(@report.body).each do |key,element| 
  .row
    .span12
      - licserver = Licserver.find(key) 
      %p.lead
        = link_to licserver.port.to_s + '@' + licserver.server, licserver_path(licserver.id) 
        .row
          - element.each do |ek,ee|
            .span6.pull-left
              %p
                = ek.to_s.sub(/_/, ' ').titlecase
              %table.table.sortable
                %thead
                  %tr
                    %th Feature
                    %th Seat Count
                    %th{ :data => { :defaultsort => 'desc' } }Usage (%)
                %tbody
                  - ee.each do |stats|
                    %tr
                      %td
                        = link_to stats[0], licserver_feature_path(licserver.id, stats[0])
                      %td
                        = link_to stats[1]
                      %td
                        = stats[2].nil? ? 0 : number_with_precision(stats[2].to_f*100 / stats[3], { :precision => 2 } )
